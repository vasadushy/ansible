lslpp -l | grep -i hitachi
lslpp -l | grep -i hdlm
oslevel -s
lppchk -vm3

odmget -q "name=hdisk4 and attribute=unique_id" CuAt | grep value

for i in `lspv | awk '{print $1}'`
do
echo $i `odmget -q "name=$i and attribute=unique_id" CuAt | grep value`
done


for i in `lspv | awk '{print $1}'`
do
echo $i `bootinfo -s $i`
done


for i in `cat servers`
do
echo $i
p24 $i "lslpp -l | grep -i hitachi; lsdev -Cc disk" 2>/dev/null
done


for i in `cat /home/a0279211/servers`
do
echo $i
scp -P24 -pr /home/a0279211/hitachi $i:/var/tmp 2>/dev/null
done

for i in `cat /home/a0279211/servers`
do
echo $i
p24 $i </home/a0279211/hitachi/san.sh 2>/dev/null
done


for i in `lsdev -Cc disk | grep -i defined | awk '{print $1}'`
do
chdev -l $i -a algorithm=round_robin -a reserve_policy=no_reserve -a queue_depth=8 -a hcheck_interval=60
done

for i in `lsdev -Cc disk | grep G1000 | awk '{print $1}'`
do
chdev -l $i -a algorithm=round_robin -a reserve_policy=no_reserve -a queue_depth=8 -a hcheck_interval=60
done

for i in `lspv | grep -i none | awk '{print $1}'`
do
chdev -l $i -a algorithm=round_robin -a reserve_policy=no_reserve -a queue_depth=8 -a hcheck_interval=60 
done



for i in `lspv | grep -i none | awk '{print $1}'`
do
chdev -l $i -a algorithm=round_robin 
done


for i in `lspv | awk '{print $1}'`
do
chdev -l $i -a reserve_policy=no_reserve -a algorithm=round_robin  -a queue_depth=8 -a hcheck_interval=60 -P
done


for i in `lsdev -Cc disk|egrep -i "hitachi|mpio|emc"|awk '{print $1}'`
do 
echo $i `lsdev -Cc disk|grep -w $i|awk '{print $4,$7,$8}'` `lsattr -El $i|grep algorithm|awk '{print $2}'` `lsattr -El $i|grep queue_depth|awk '{print $2}'` `lsattr -El $i |grep hcheck_interval|awk '{print $2}'` `lsattr -El $i|grep reserve_policy|awk '{print $2}'` `lspath |grep -w $i|wc -l` `bootinfo -s $i`
done


lsdev -Cc adapter | grep -i fcs | awk '{print $1}' | while read a
do
echo $a `lscfg -vpl $a | grep -i net | cut -b 35-60`
done



check and remove disk from veritas control
=========================================

vxdisk -o alldgs -e list 
vxdmpadm include vxvm path=hdisk0 
vxdmpadm include vxdmp path=hdisk0 
vxdisk -o alldgs -e list 
vxdisk rm ams_25000_100 
rmdev -dl hdisk0 

vxdmpadm -c -f disable path=hdisk8 

/etc/vx/vxdmp.exclude 
/etc/vx/vxvm.exclude 


for i in `lspv | grep None | awk '{print $1}'`
do
echo $i `lscfg -vpl $i | grep -i vpd` `bootinfo -s $i`
done



HDS = 8

EMC - AIX 5.3 =16

EMC - AIX 6.1 =32

EMC - AIX 7.1 =32

 -a max_transfer=0x100000



for i in `lspv | awk '{print $1}'`
do
chdev -l $i -a algorithm=round_robin -a reserve_policy=no_reserve -a queue_depth=32 -a hcheck_interval=60
done


for i in `lsdev -Cc disk | grep MPIO | awk '{print $1}'`
do
chdev -l $i -a algorithm=round_robin -a reserve_policy=no_reserve -a queue_depth=16 -a hcheck_interval=60
done



for i in `lspv| awk '{print $1}'`
do
echo $i `odmget -q "name=$i and attribute=unique_id" CuAt | grep value` `bootinfo -s $i`
done



INQ Location 

bookworm:/home/a0279211/INQ

./inq.aix64_51 -sym_wwn








lspath -F"name parent connection status path_status path_id" | grep -i 30013 | while read n p c s x y 
do
echo  removing $n $p $c
rmpath -l $n -p $p -w $c -d
done


rmpath -l $n -p $p -w $c -d




rmpath -l hdisk126 -p fscsi0 -w 50060e800475fca0,1000000000000 -d



devrsrv -c query -l hdisk126 --> to check the reserve on disks 

devrsrv -c release -l hdisk0  --> to release the scsi reserve

lsmpio -l hdisk156 -S -d --> to chech the disks statistics


for i in `multipath -ll | grep -i failed | awk '{print $3}'`
do
echo offline> /sys/block/$i/device/state
echo 1 > /sys/block/$i/device/delete
done



for i in `lspath | awk '{print $3}' | sort | uniq`
do
lsattr -El $i | egrep -i 'dyntrk|fc_err'
done




VSCSI 


#!/bin/ksh
FORMAT='%-8s %-8s %-8s %-8s %-8s %-8s %-9s %-10s %-5s %-5s %-5s %s\n'
echo "==============================================================================================="
printf "${FORMAT}" "SERVER" "DISK" "SIZE" "VG_NAME" "LUNID" "Q_DEPTH" "POLICY" "ALGORITHM" "PATH"
echo "==============================================================================================="
lspv  | while read line ; do
set $line
lun=$(odmget -q "name=${1} and attribute=unique_id" CuAt |grep value |cut -c 28-31)
d_ser=`echo "ibase=16; $h_ser" |bc`
q_dep=$(lsattr -El $1 -a queue_depth |awk '{print $2}')
alg=$(lsattr -El $1 -a algorithm |awk '{print $2}')
res=$(lsattr -El  $1 -a reserve_policy |awk '{print $2}')
path=$(lspath -l $1 | awk '{print $3}' > /tmp/path; tr '\n' ' ' </tmp/path | egrep -i 'fsc|vsc')
printf "${FORMAT}"  $(uname -n) ${1} `bootinfo -s $1` ${3} ${lun} $q_dep $res $alg $path
done






